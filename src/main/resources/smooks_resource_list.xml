<?xml version="1.0" encoding="UTF-8"?>
<smooks-resource-list
    xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
    xmlns:edi="http://www.milyn.org/xsd/smooks/edi-1.4.xsd"
    xmlns:javabean="http://www.milyn.org/xsd/smooks/javabean-1.5.xsd"
>
    <edi:reader mappingModel="/edi_message_mapping.xml"/>

    <javabean:bean beanId="purchaseOrderDocument" class="com.andrewshawcare.smooks_api.PurchaseOrderDocument" createOnElement="PurchaseOrderDocument">
        <javabean:wiring property="purchaseOrderHeader" beanIdRef="purchaseOrderHeader"/>
        <javabean:wiring property="purchaseOrderCustomer" beanIdRef="purchaseOrderCustomer"/>
        <javabean:wiring property="purchaseOrderItemCollection" beanIdRef="purchaseOrderItemCollection"/>
    </javabean:bean>

    <javabean:bean beanId="purchaseOrderHeader" class="com.andrewshawcare.smooks_api.PurchaseOrderHeader" createOnElement="${purchaseOrderDocument}/PurchaseOrderHeader">
        <javabean:value data="#/Id" property="id"/>
        <javabean:value data="#/StatusCode" property="statusCode"/>
        <javabean:value data="#/NetAmount" property="netAmount" decoder="BigDecimal"/>
        <javabean:value data="#/TotalAmount" property="totalAmount" decoder="BigDecimal"/>
        <javabean:value data="#/Tax" property="tax" decoder="BigDecimal"/>
        <javabean:value data="#/Date" property="date" decoder="Date">
            <javabean:decodeParam name="format">EEE MMM dd HH:mm:ss z yyyy</javabean:decodeParam>
            <javabean:decodeParam name="locale">en</javabean:decodeParam>
        </javabean:value>
    </javabean:bean>

    <javabean:bean beanId="purchaseOrderCustomer" class="com.andrewshawcare.smooks_api.PurchaseOrderCustomer" createOnElement="${purchaseOrderDocument}/PurchaseOrderCustomer">
        <javabean:value data="#/Username" property="username"/>
        <javabean:wiring property="name" beanIdRef="name"/>
        <javabean:value data="#/State" property="state"/>
    </javabean:bean>
    
    <javabean:bean beanId="name" class="com.andrewshawcare.smooks_api.Name" createOnElement="Name">
        <javabean:value data="#/First" property="first"/>
        <javabean:value data="#/Last" property="last"/>
    </javabean:bean>

    <javabean:bean beanId="purchaseOrderItemCollection" class="java.util.ArrayList" createOnElement="PurchaseOrderDocument">
        <javabean:wiring beanIdRef="purchaseOrderItem"/>
    </javabean:bean>

    <javabean:bean beanId="purchaseOrderItem" class="com.andrewshawcare.smooks_api.PurchaseOrderItem" createOnElement="PurchaseOrderItem">
        <javabean:value data="#/Position" property="position" decoder="Integer"/>
        <javabean:value data="#/Quantity" property="quantity" decoder="Integer"/>
        <javabean:value data="#/ProductId" property="productId"/>
        <javabean:value data="#/Title" property="title"/>
        <javabean:value data="#/Price" property="price" decoder="BigDecimal"/>
    </javabean:bean>

</smooks-resource-list>